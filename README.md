# Reddit

## Тема
**Reddit** - один из крупнейших веб-сервисов в мире. Сочетает в себе функционал месседжера и социальной сети. 

<img src="https://avatars.mds.yandex.net/i?id=2965c5c628148b5f18c3952685a2f55d_l-7594176-images-thumbs&n=13" width="300">


## 1. MVP функции

- Авторизация / Регистрация
- Просмотр ленты
- Просмотр поста
- Рекомендация постов
- Написание комментария
- Оценка комментария
- Оценка поста 
- Создание / Удаление сабреддита
- Подписка / Отписка на сабреддит
- Публикация поста
- Поиск поста

## Аудитория Reddit

### Активные пользователи [2]
- DAU - 101 млн  
- WAU - 401 млн  
- MAU - 1,2 млрд  

### Гендерное распределение [1]
- Мужчины - 61.2%  
- Женщины - 37.8%  

### География [5]

**Северная Америка**
- США - 197.79 млн  
- Канада - 23.9 млн  

**Европа**
- Великобритания - 34.21 млн  
- Германия - 22.5 млн  
- Франция - 12.9 млн  


**Азия**
- Индия - 26.8 млн  
- Филлипины - 10.4 млн  

**Океания**
- Австралия - 13.5 млн  

**Южная Америка**
- Бразилия - 22.5 млн  
- Мексика - 15.7 млн  

### Возрастное распределение [3]
- 18–24 - 14.88%  
- 25–34 - 23.09%  
- 35–44 - 19.34%  
- 45–54 - 17.68%  
- 55–64 - 13.06%  
- 65+ - 11.88%  

---

## 2. Расчет нагрузки

## Продуктовые метрики

### Активные пользователи
- В наиболее активных странах-пользователях сервиса - 380,2 млн пользователей. Пусть вне этих стран находится еще 50 млн пользователей. Тогда будем считать, что примерное число пользователей - **420 млн**. [2]
- DAU - 101 млн  
- WAU - 401 млн  
- MAU - 1,2 млрд  

### Средний размер хранилища пользователя

**Профиль пользователя**
- Профиль состоит из аватарки 256 x 256, баннера, почты, описания, имени пользователя и ника. Пусть картинка имеет формат png и весит как стандартная аватарка reddit - 7.5 Кб. Так как статистики по пользователям с аватаркой нет, то опираясь на импиреческий опыт предположим, что аватарка стоит у 15% ползователей. То есть в среднем вес на пользователя 0.15 x 7,5 = 1.125 Кб.
- Для баннера буду учитывать возможный размер в 150 КБ. Пусть его ставят 20% пользователей.  То есть в среднем вес на пользователя 150 * 0.2 = 30 Кб.
- Максимальная длина имени составляет 90 символов, описания - 200, ника - 23, gmail почты - 95. Пусть в среднем длина имени и описания примерно в 25% от максимального размера: 20 для имени, 50 для описания, 24 для почты. Для ника возьмем 50% - 11. Так как целевая аудитория сервиса проживает в англоговорящих странах, то приму, что символы латиницы будут весить по 1 байту. Таким образом, вес профиля пользователя в среднем составляет 30 КБ + 1,125 КБ + 20 байт + 50 байт + 24 байт + 11 байт = 0.031 МБ.

**Посты пользователя**
- Известно, что на реддите **более 1 млрд постов** [6]. Согласно [7] 38% всех постов имеют изображения, 29% являются текстовыми, 21% с видео, а остальные оставшиеся 12% - со ссылкой. Соответственно среднее количество опубликованных одним пользователем текстовых постов: 1 млрд x 0.29 / 420 млн = 0.69. Постов с изображением: 1 млрд x 0.38 / 420 млн = 0.9. Постов с видео: 1 млрд x 0.21 / 420 млн = 0.5. Постов с ссылкой: 1 млрд x 0.12 / 420 млн = 0.29.
- Каждый пост имеет заголовок, максимальная длина которого - 300 символов. Возьмем, что средняя длина поста будет 25 % от возможнного - 75 символов - 75 байт.
- Пусть средняя длина текстового содержимого поста - 300 символов - 300 байт Тогда 0,69 x 375 = 259 байт ≈ **0.25 КБ**. 
- Пусть средний пазмер размер фото -  2 МБ. Тогда размер поста с изображением на одного пользователя составляет (2 МБ + 75 байт) x 0.9 = **2 МБ**.
- В среднем пусть видео длится 30 секунд и размером в 15 МБ разрешением 720p, тогда размер поста с видео на одного пользователя составляет 15 МБ x 0.5 = **7.5** МБ.
- В среднем пусть длина URL-адреса в 75 символов, тогда размер поста с ссылкой составляет (75 байт + 75 байт) x 0.29 = **43.5** байт.
- В итоге имеем **9.3 МБ** на пользователя.

**Комментарии пользователя**
- Известно, что на реддите **более 16 млрд комментариев** [6]. Пусть в среднем длина комментария - 120 символов - 120 байт. Количество комментариев в среднем на одного пользователя составляет 16 млрд / 420 млн = 38.1. Таким образом, вес комментариев на одного пользователя составит 38.1 x 120 байт = **4.47 КБ ≈ 0.0044 МБ**

**Сабреддиты пользователя**
- Каждый сабреддит имеет те же атрибуты, что и профиль пользователя, кроме почты. Согласно [7] существует более **2.6 млн сабреддитов**. Тогда среднее количество созданных одним пользователем сабредиттов составляет 2.6 млн / 420 млн = 0.0062. Таким образом, вес сабреддита на одного пользователя составит (150 КБ + 7.5 КБ + 20 байт + 50 байт + 11 байт) x 0.0062 = **0.001 МБ**.

**Оценки пользователя**
- Пусть оценка в БД хранится как id сущности, id пользователя и логический флаг. Тогда id занимают 8 + 8 = 16 байт и флаг - 1 байт. Пусть в среднем пользователь имеет 1000 оценок, тогда 17 x 1000 = 17000 байт ≈ **16.6 КБ ≈ 0.016 МБ**. 

**Подписки пользователя**
- Пусть пользователь в среднем подписывается на 15 сабреддитов. Тогда каждая оценка имеет свое id, id сабреддита и пользователя. То есть 24 байта. 15 x 24 = 360 байт  
≈ **0.35 КБ ≈ 0.00034 МБ**

# Итоговая таблица

| Категория | Среднее количество (шт.) | Объём (МБ) |
|------------|--------------------------|------------|
| Профиль | 1 | 0.031 |
| Посты (всего 2.38) | 2.38 | 9.30 |
| ├─ Текстовые | 0.69 | 0.00025 |
| ├─ С изображением | 0.90 | 1.80 |
| ├─ С видео | 0.50 | 7.50 |
| └─ Со ссылкой | 0.29 | 0.00004 |
| Комментарии | 38.1 | 0.0044 |
| Сабреддиты | 0.0062 | 0.001 |
| Оценки | 1000 | 0.016 |
| Подписки | 15 | 0.00034 |

---

### Средний размер хранилища на одного пользователя

**≈ 9.36 МБ**

# Среднее количество действий пользователя по действиям из MVP в день

**Авторизация**
- Данные по авторизации и регистрации отсутствуют. Пусть пользователь в среднем авторизуется с разных устройств по разу в месяц. Тогда считая телефон, ноутбук и ПК получает 3 / 30 = **0.1 раза**.

**Публикация постов**
- Согласно [8] за 2024 было опубликовано 550 млн постов. Тогда в день - 550 млн / 365 = 1.507 млн постов. Один пользователь публикует ежедневно 1.507 млн / 101 млн (DAU) = **0.0149 поста**.

**Публикация комментариев**
- Согласно [8] за 2024 было написано 2.72 миллиарда комментариев. Тогда в день - 2.72 млн / 365 = 7.452 млн постов. Один пользователь публикует ежедневно 7.452 млн / 101 млн (DAU) = **0.074 комментария**.

**Оценки (лайки / дизлайки)**
- Согласно [7] пользователи ежедневно оставляют лайки в среднем 9.4 миллиона раз. Будем считать, что число дизлайков аналогичное. Таким образом, общее количество оценок, оставляеммых пользователями ежедневно = 9.4 млн + 9.4 млн = 18.8 млн. Один пользователь оставляет ежедневно 18.8 млн / 101 млн (DAU) = **0.186 оценки**.

**Создание сабреддитов**
- Согласно [1] на сервисе создается около 1533 сабреддитов каждый день. Один пользователь создает ежедневно 1533 / 101 млн (DAU) = **0.000015 сабреддита**.

**Просмотр поста**
- Согласно [9] среднее время продолжительности одной сессии составляет 12.43 минуты и в среднем в месяц сервис насчитывает в среднем насчитывается 5.06 миллиарда посещений. Примерное количество сессий пользователя за день составляет 5.06 млрд / 1.2 млрд = 5. Согласно [10] средняя длина текстового поста на reddit составляет 270 символом. Согласно [11] время, затрачиваемое на прочтение 270 символов составит 50-60 секунд. Считая, что 38% всех постов - посты с изображениями, где пользователи тратят на просмотр в среднем 7 секунд. Также 21% постов составляют посты с видео, среднюю длину которых мы приняли за 30 секунд. Будем считать, что каждое ведео пользователь досмотрит до конца. Таким образом, пользователь затрачивает примерно 30 секунд на пост. Один пользователь в день просматривает ((13 x 60 + 60 x 0.32) * 5) секунд / 30 секунд = **133 поста**.

# Просмотр ленты
- Лента реккомендованных постов прогружается по 32 поста за запрос. Учту из вычислений выше, что пользователь в среднем просматривает около 133 поста в день и рассчитаю количество запросов на одного пользователя в день для ленты рекомендаций. На одного пользователя в день уходит около 133 / 32 = **4.16 запросов** для прогрузки ленты.

# Подписки / отписки
- Данных по подпискам/отпискам на сабреддит в сети нет.

# Итоговая таблица действий пользователя в день

| Действие | Среднее количество в день |
|------------|----------------------------|
| Авторизация | 0.1 |
| Публикация поста | 0.015 |
| Публикация комментария | 0.074 |
| Оценка (лайк/дизлайк) | 0.186 |
| Создание сабреддита | 0.000015 |
| Просмотр постов | 133 |
| Запрос ленты | 4.16 |

## Технические метрики

### Размер хранилища

# Профили пользователей
- Ранее было принято считать число пользователей за 420 млн. Таким образом, вес всех профилей будет составлять 0.031 МБ * 420 млн = 12.4 ТБ.

# Посты
## Текстовые посты

0,00025 МБ x 420 000 000 = 105 000 МБ

105 000 / 1024 = 102.5 ГБ  
102.5 / 1024 = **0,10 ТБ**

## Посты с изображением

1.8 МБ x 420 000 000 = 756 000 000 МБ

756 000 000 / 1024 = 738 281 ГБ  
738 281 / 1024 = **721 ТБ**

## Посты с видео

7.5 МБ x 420 000 000 = 3 150 000 000 МБ

3 150 000 000 / 1024 = 3 076 172 ГБ  
3 076 172 / 1024 = **3004 ТБ ≈ 2.93 ПБ**

## Посты со ссылкой

0.00004 МБ x 420 000 000 = 16 800 МБ

16 800 / 1024 = 16.4 ГБ  
16.4 / 1024 = **0.016 ТБ**

# Комментарии

0.0044 МБ x 420 000 000 = 1 848 000 МБ

1 848 000 / 1024 = 1805 ГБ  
1805 / 1024 = **1.76 ТБ**

# Оценки

0.016 МБ x 420 000 000 = 6 720 000 МБ

6 720 000 / 1024 = 6562 ГБ  
6562 / 1024 = **6.41 ТБ**

# Подписки

0.00034 МБ x 420 000 000 = 142 800 МБ

142 800 / 1024 = 139.5 ГБ  
139.5 / 1024 = **0.136 ТБ**

# Сабреддиты

0.001 МБ x 420 000 000 = 420 000 МБ

420 000 / 1024 = 410 ГБ  
410 / 1024 = **0.4 ТБ**

# Итоговая таблица

| Категория | Объём (ТБ) |
|------------|------------|
| Профили | 12.4 |
| Текстовые посты | 0.10 |
| Посты с изображением | 721 |
| Посты с видео | 3004 |
| Посты со ссылкой | 0.016 |
| Комментарии | 1.76 |
| Оценки | 6.41 |
| Подписки | 0.136 |
| Сабреддиты | 0.4 |


### RPS
Будем считать средний RPS как DAU x среднее число запросов от пользователя в день / 86400. RPS будет считаться пиковым, если он превышает средний в 5 раз.

## 1. Авторизация

0.1 x 101 000 000 = 10 100 000 запросов в день

10 100 000 / 86400 = **117 RPS**

Пиковый:  
117 x 5 = **585 RPS**

---

## 2. Публикация поста

0.015 x 101 000 000 = 1 515 000 запросов в день

1 515 000 / 86400 = **17.5 RPS**

Пиковый:  
17.5 x 5 = **87.5 RPS**

---

## 3. Публикация комментария

0.074 x 101 000 000 = 7 474 000 запросов в день

7 474 000 / 86400 = **86.5 RPS**

Пиковый:  
86.5 x 5 = **432.5 RPS**

---

## 4. Оценка (лайк / дизлайк)

0.186 x 101 000 000 = 18 786 000 запросов в день

18 786 000 / 86400 = **217 RPS**

Пиковый:  
217 x 5 = **1085 RPS**

---

## 5. Создание сабреддита

0.000015 x 101 000 000 = 1 515 запросов в день

1 515 / 86400 = **0.018 RPS**

Пиковый:  
0.018 x 5 = **0.09 RPS**

---

## 6. Просмотр постов

133 x 101 000 000 = 13 433 000 000 запросов в день

349 460 000 / 86400 = **155 475 RPS**

Пиковый:  
155 475 x 5 = **777 380 RPS**

---

## 7. Запрос ленты

4.16 x 101 000 000 = 420 160 000 запросов в день

420 160 000 / 86400 = **4863 RPS**

Пиковый:  
4863 x 5 = **24 315 RPS**

---

# Итоговая таблица

| Действие | В день (млн) | Средний RPS | Пиковый RPS |
|------------|--------------|-------------|-------------|
| Авторизация | 10.1 | 117 | 585 |
| Публикация поста | 1.52 | 17.5 | 87.5 |
| Публикация комментария | 7.47 | 86.5 | 432.5 |
| Оценка | 18.786 | 217 | 1085 |
| Создание сабреддита | 0.0015 | 0.018 | 0.09 |
| Просмотр постов | 349.46 | 155 475 | 777 380 |
| Запрос ленты | 420 160 000 | 4863 | 24 315 |


### Сетевой трафик
Формула для расчета среднего сетевого трафика: трафик на действие x средний RPS.

# Трафик на действие

Авторизация: 44 байта (24 байта для почты и 20 для пароля) = 0.000041 МБ  

Публикация поста:  
0.29 x 0.00025 + 0.38 x 2 + 0.21 x 15 + 0.12 x 0.00004  
≈ **3.91 МБ**

Создание комментария: 120 байт ≈ 0.000114 МБ  

Выставление оценки: 17 байт ≈ 0.000016 МБ  

Создание сабреддита: 0.001 МБ  

Просмотр поста:  
≈ **3.91 МБ**

Запрос ленты (32 поста):  
3.91 x 32 = **125.1 МБ**

---

# Расчёт трафика

## 1. Авторизация

0.000038 x 117 = 0.0044 МБ/с  

В Гбит/с:  
0.0044 x 8 / 1000 = **0.000035 Гбит/с**

Пиковый:  
0.000035 x 5 = **0.00017 Гбит/с**

---

## 2. Публикация поста

3.91 x 17.5 = 68.4 МБ/с  

В Гбит/с:  
68.4 x 8 / 1000 = **0.547 Гбит/с**

Пиковый:  
0.547 x 5 = **2.73 Гбит/с**

---

## 3. Публикация комментария

0.000114 x 86.5 = 0.0099 МБ/с  

В Гбит/с:  
0.0099 x 8 / 1000 = **0.000079 Гбит/с**

Пиковый:  
0.000079 x 5 = **0.00039 Гбит/с**

---

## 4. Оценка

0.000016 x 222 = 0.00355 МБ/с  

В Гбит/с:  
0.00355 x 8 / 1000 = **0.000028 Гбит/с**

Пиковый:  
0.000028 x 5 = **0.00014 Гбит/с**

---

## 5. Создание сабреддита

0.001 x 0.018 = 0.00018 МБ/с  

В Гбит/с:  
0.000018 x 8 / 1000 = **0.000000144 Гбит/с**

Пиковый:  
0.000000144 x 5 = **0.0000007 Гбит/с**

---

## 6. Просмотр постов

3.91 x 4043 = 15 807 МБ/с  

В Гбит/с:  
15 807 x 8 / 1000 = **126.5 Гбит/с**

Пиковый:  
126.5 x 5 = **632.5 Гбит/с**

---

## 7. Запрос ленты

125.1 x 129 = 16 138 МБ/с  

В Гбит/с:  
16 138 x 8 / 1000 = **129.1 Гбит/с**

Пиковый:  
129.1 x 5 = **645.5 Гбит/с**

---

# Итоговая таблица сетевого трафика

| Действие | Средний МБ/с | Средний Гбит/с | Пиковый Гбит/с |
|------------|--------------|----------------|----------------|
| Авторизация | 0.0044 | 0.000035 | 0.00017 |
| Публикация поста | 68.4 | 0.547 | 2.73 |
| Публикация комментария | 0.0099 | 0.000079 | 0.00039 |
| Оценка | 0.0036 | 0.000028 | 0.00014 |
| Создание сабреддита | 0.018 | 0.000000144 | 0.0000007|
| Просмотр постов | 15 807 | 126.5 | 632.5 |
| Запрос ленты | 16 138 | 129.1 | 645.5 |




### Источники  
1. https://resourcera.com/data/social/reddit-users/  
2. https://grabon.com/blog/reddit-statistics/  
3. https://explodingtopics.com/blog/reddit-users#reddit-users-by-age 
4. https://www.socialchamp.com/blog/reddit-stats/#short-summary  
5. https://worldpopulationreview.com/country-rankings/reddit-users-by-country 
6. https://www.marketwatch.com/story/reddit-could-use-this-strategy-to-monetize-aggressively-following-its-ipo-2e1c91da
7. https://sqmagazine.co.uk/reddit-statistics/
8. https://backlinko.com/reddit-users
9. https://www.semrush.com/website/reddit.com/overview/
10. https://www.tensorflow.org/datasets/catalog/reddit?hl=ru
11. https://ventropymedia.com/content-marketing-what-we-learned-about-optimal-word-count-for-posts-blogs-articles/